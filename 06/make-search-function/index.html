<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><InfinitySpiritMetaTitle>検索機能を搭載する</InfinitySpiritMetaTitle></title>
    <link rel="stylesheet" href="../../InfinitySpirit/template/style.css" />
    <script defer src="../../InfinitySpirit/template/script.js"></script>
    <link rel="stylesheet" href="/The-Infinitys-Infinity/style.css" />
    <script defer src="/The-Infinitys-Infinity/script.js"></script>
  </head>
  <body>
    <div class="article-body">
      <div class="article-title">
        検索機能を搭載する
        <br />
        <svg
          class="clock-watch"
          version="1.1"
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          viewbox="0 0 100 100"
          stroke="#888"
          fill="none"
          stroke-width="5"
          stroke-linecap="round">
          <g class="Infinity-clock_frame">
            <circle cx="50" cy="50" r="40" />
          </g>
          <g class="Infinity-clock_hands">
            <path d="M50 50,L50 20 Z" />
            <path d="M50 50,L70 70 Z" />
          </g>
        </svg>
        <InfinitySpiritDate>2024/06/19</InfinitySpiritDate>
      </div>
      <div class="article-content">
        <InfinitySpiritContent>
          <h1 id="title">title: 検索機能を搭載する</h1>
          <h1 id="_1">検索機能をブログに搭載しました</h1>
          <p>The Infinity&rsquo;sです。つい最近<br />
          <a href="../update_and_add_blog_list/">次のブログ記事を表示する機能を追加</a><br />
          したばかりですが、<br />
          機能的には足りませんでした、と言うのもですね&hellip;<br />
          私のブログには<strong>検索機能</strong>が存在して居なかったんですよ&hellip;<br />
          それでこのままではまずいと思いまして、ブログに検索機能を足しました。</p>
          <h2 id="_2">面倒だった作業</h2>
          <p>やり方としては、inputエレメントを改めて作り、そこに検索クエリを入れる方式にします。</p>
          <h3 id="html">html</h3>
          <pre class="codehilite"><code class="language-html">&lt;div id=&quot;list-head&quot;&gt;
            &lt;h1&gt;Blog List&lt;/h1&gt;
            &lt;div&gt;
              &lt;img
                onclick=&quot;search_articles()&quot;
                src=&quot;../image/Infinity-search.svg&quot;
                alt=&quot;&quot; /&gt;
              &lt;input id=&quot;search&quot; type=&quot;text&quot; onchange=&quot;search_articles()&quot; /&gt;
            &lt;/div&gt;
          &lt;/div&gt;
          </code></pre>
          
          <p>こんな感じです。<br />
          次に、CSSの適用&hellip;</p>
          <h3 id="css">CSS</h3>
          <pre class="codehilite"><code class="language-css">#list-head {
            width: 100%;
            height: auto;
            display: flex;
            @media (max-aspect-ratio:1/1) {
              display: block;
            }
          }
          
          #list-head h1 {
            margin-right: auto;
            position: relative;
            font-size: 4vh;
          }
          
          #list-head div {
            width: 40vh;
            height: 4vh;
            background-color: var(--background);
            display: flex 1 auto;
          }
          
          #list-head div img {
            width: 10%;
            height: 100%;
            margin-right: auto;
          }
          
          #list-head div input {
            width: 85%;
            height: 100%;
            font-size: 4vh;
            background-color: var(--background);
            color: var(--text);
          }
          </code></pre>
          
          <p>そしてjavascript&hellip;</p>
          <h3 id="javascript">JavaScript</h3>
          <pre class="codehilite"><code class="language-javascript">//検索機能
          const article_search_input = document.querySelector(&quot;#list-head div input&quot;);
          const search_articles = () =&gt; {
            const search_query = article_search_input.value.replace(&quot;　&quot;, &quot; &quot;).toLowerCase();
            const blog_buttons = document.querySelector(&quot;#blog-button-section&quot;).children;
            if (search_query == &quot;&quot;) {
              for (let i = 0; i &lt; blog_buttons.length; i++) {
                blog_buttons[i].style.display = &quot;&quot;;
              }
              return null;
            }
            const search_querys = search_query.split(&quot; &quot;);
            for (let i = 0; i &lt; blog_buttons.length; i++) {
              const blog_button = blog_buttons[i];
              const button_inner = blog_button.innerHTML;
              const title = button_inner.substring(button_inner.indexOf(&quot;&lt;div&gt;&quot;) + 5, button_inner.indexOf(&quot;&lt;/div&gt;&quot;)).toLowerCase();
              blog_button.style.display = &quot;&quot;;
              for (let j = 0; j &lt; search_querys.length; ++j) {
                if (-1 == title.indexOf(search_querys[j])) {
                  blog_button.style.display = &quot;none&quot;;
                }
              }
            }
            return search_query;
          }
          </code></pre>
          
          <h2 id="_3">仕組みの解説</h2>
          <p>全体的な仕組みとしては、</p>
          <ol>
          <li>searchクエリが入力される</li>
          <li>検索ボタンかenterが押される</li>
          <li>全てのボタンをチェック開始する</li>
          <li>ブログボタンを初期化(一旦displayの値をnullにする)</li>
          <li>検索クエリを含まないブログのボタンのdisplayをnoneに設定する</li>
          <li>(4-5の作業を)繰り返す</li>
          </ol>
          <p>と言うふうになっています。</p>
          <h2 id="_4">感想</h2>
          <p>かなり難しかったです。検索機能の実装自体が難しいのと、<br />
          アイコンを書いていくのが大変でした。検索アイコンはここにあります。<br />
          <img alt="search_icon" src="/image/Infinity-search.svg" /></p>

          </InfinitySpiritContent>
      </div>
      <div class="article-index"></div>
      <div class="articles-recommended">
        <button>
          <img src="../../InfinitySpirit/template/image/loading.svg" alt="" />
          <div>
            <h1>THE INFINITYS BELIEVE THE INFINITY</h1>
            <p>date:2024/07/07</p>
          </div>
        </button>
      </div>
    </div>
  </body>
</html>
